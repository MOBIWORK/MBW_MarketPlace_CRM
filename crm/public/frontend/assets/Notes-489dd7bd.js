import{y as U,r as i,w as j,d as C,e as r,f as u,h as l,i as d,v as s,F as b,k as D,q as k,l as V,j as n,x as m,b1 as P,as as T,D as E,aN as I,aJ as R,M as S,N as z,R as L,t as q,X as A,c as J}from"./index-c24d0e80.js";import{_ as X,a as G}from"./LayoutHeader-f4141a44.js";import{_ as H}from"./ViewControls-a6883ed1.js";import{_ as K}from"./DatePicker-dafc153c.js";import"./EditIcon-2d7044e3.js";import"./DatetimePicker-dd440c1e.js";/* empty css                                                                       */import"./index-4e648177.js";import"./label-0a4351d9.js";const O={class:"flex-1 overflow-y-auto"},Q={key:0,class:"grid grid-cols-4 gap-4 px-5 pb-3"},W=["onClick"],Y={class:"flex items-center justify-between"},Z={class:"truncate text-lg font-medium"},ee={class:"mt-2 flex items-center justify-between gap-2"},te={class:"flex items-center gap-2"},oe={class:"text-sm text-gray-800"},ae={class:"text-sm text-gray-700"},le={key:1,class:"flex h-full items-center justify-center"},se={class:"flex flex-col items-center gap-3 text-xl font-medium text-gray-500"},ge={__name:"Notes",setup(ne){const{getUser:M}=U(),F=[{label:__("Notes"),route:{name:"Notes"}}],c=i(!1),p=i(null),a=i({}),_=i(1),f=i(20);j(()=>{var o,e;return(e=(o=a.value)==null?void 0:o.data)==null?void 0:e.page_length_count},(o,e)=>{!o||o===e||(f.value=o)});function g(){p.value={title:"",content:""},c.value=!0}function $(o){p.value=o,c.value=!0}async function B(o){await J("frappe.client.delete",{doctype:"FCRM Note",name:o}),a.value.reload()}return(o,e)=>{var x,w,N,y;const h=C("FeatherIcon"),v=C("Button");return r(),u(b,null,[l(X,null,{"left-header":d(()=>[l(n(G),{items:F})]),"right-header":d(()=>[l(v,{variant:"solid",label:o.__("Create"),onClick:g},{prefix:d(()=>[l(h,{name:"plus",class:"h-4"})]),_:1},8,["label"])]),_:1}),l(H,{modelValue:a.value,"onUpdate:modelValue":e[0]||(e[0]=t=>a.value=t),loadMore:_.value,"onUpdate:loadMore":e[1]||(e[1]=t=>_.value=t),updatedPageCount:f.value,"onUpdate:updatedPageCount":e[2]||(e[2]=t=>f.value=t),doctype:"FCRM Note",showElement:!0,placeholderText:o.__("Search content"),options:{hideColumnsButton:!0,defaultViewName:o.__("Notes View")}},null,8,["modelValue","loadMore","updatedPageCount","placeholderText","options"]),s("div",O,[(w=(x=a.value.data)==null?void 0:x.data)!=null&&w.length?(r(),u("div",Q,[(r(!0),u(b,null,D(a.value.data.data,t=>(r(),u("div",{class:"group flex h-56 cursor-pointer flex-col justify-between gap-2 rounded-lg border px-5 py-4 shadow-sm hover:bg-gray-50",onClick:re=>$(t)},[s("div",Y,[s("div",Z,m(t.title),1),l(n(E),{options:[{label:o.__("Delete"),icon:"trash-2",onClick:()=>B(t.name)}],onClick:e[3]||(e[3]=T(()=>{},["stop"]))},{default:d(()=>[l(v,{icon:"more-horizontal",variant:"ghosted",class:"hover:bg-white"})]),_:2},1032,["options"])]),t.content?(r(),V(n(I),{key:0,content:t.content,editable:!1,"editor-class":"!prose-sm max-w-none !text-sm text-gray-600 focus:outline-none",class:"flex-1 overflow-hidden"},null,8,["content"])):k("",!0),s("div",ee,[s("div",te,[l(R,{user:t.owner,size:"xs"},null,8,["user"]),s("div",oe,m(n(M)(t.owner).full_name),1)]),l(n(q),{text:n(z)(t.modified,n(L))},{default:d(()=>[s("div",ae,m(o.__(n(S)(t.modified))),1)]),_:2},1032,["text"])])],8,W))),256))])):k("",!0)]),(y=(N=a.value.data)==null?void 0:N.data)!=null&&y.length?(r(),V(n(K),{key:0,class:"border-t px-5 py-2",modelValue:a.value.data.page_length_count,"onUpdate:modelValue":e[4]||(e[4]=t=>a.value.data.page_length_count=t),options:{rowCount:a.value.data.row_count,totalCount:a.value.data.total_count},onLoadMore:e[5]||(e[5]=()=>_.value++)},null,8,["modelValue","options"])):(r(),u("div",le,[s("div",se,[l(A,{class:"h-10 w-10"}),s("span",null,m(o.__("No {0} Found",[o.__("Notes")])),1),l(v,{label:o.__("Create"),onClick:g},{prefix:d(()=>[l(h,{name:"plus",class:"h-4"})]),_:1},8,["label"])])])),l(P,{modelValue:c.value,"onUpdate:modelValue":e[6]||(e[6]=t=>c.value=t),reloadNotes:a.value,"onUpdate:reloadNotes":e[7]||(e[7]=t=>a.value=t),note:p.value},null,8,["modelValue","reloadNotes","note"])],64)}}};export{ge as default};
//# sourceMappingURL=Notes-489dd7bd.js.map
