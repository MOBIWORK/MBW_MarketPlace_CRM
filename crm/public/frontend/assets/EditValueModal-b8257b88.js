import{D as q}from"./DatePicker-c6e9e44c.js";import{m as y,u as g,B as z,o as P,A as R,r as v,d as _,e as b,l as h,i as V,v as r,x as k,h as C,bo as T,j as Y,Z as G,c as I,aj as a,G as i,a6 as O,aN as Z}from"./index-2d64d5a8.js";const H={class:"mb-4"},J={class:"mb-1.5 text-sm text-gray-600"},K={class:"mb-1.5 text-sm text-gray-600"},X={__name:"EditValueModal",props:y({doctype:{type:String,required:!0},selectedValues:{type:Array,required:!0}},{modelValue:{},modelModifiers:{},unselectAll:{},unselectAllModifiers:{}}),emits:y(["reload"],["update:modelValue","update:unselectAll"]),setup(c,{emit:D}){const x=["Check"],w=["Link","Dynamic Link"],A=["Float","Int","Currency","Percent"],B=["Select"],M=["Text Editor"],S=["Date","Datetime"],n=c,d=g(c,"modelValue"),E=g(c,"unselectAll"),N=D,p=z({url:"crm.api.doc.get_fields",cache:["fields",n.doctype],params:{doctype:n.doctype}});P(()=>{var e;(e=p.data)!=null&&e.length||p.fetch()});const L=R(()=>{var e;return((e=n.selectedValues)==null?void 0:e.size)||0}),o=v({label:"",type:"",value:"",options:""}),s=v(""),m=v(!1);function F(){let e=s.value;o.value.type=="Check"&&(e=e=="Yes"?1:0),m.value=!0,I("frappe.desk.doctype.bulk_update.bulk_update.submit_cancel_or_update_docs",{doctype:n.doctype,docnames:Array.from(n.selectedValues),action:"update",data:{[o.value.value]:e||null}}).then(()=>{o.value={label:"",type:"",value:"",options:""},s.value="",m.value=!1,d.value=!1,E.value(),N("reload")})}function U(e){s.value="",e&&(o.value=e)}function $(e){let t=e.target?e.target.value:e;s.value=t}function j(e){const{type:t,options:u}=e;if(B.includes(t)||x.includes(t)){const f=t=="Check"?["Yes","No"]:getSelectOptions(u);return a(i,{type:"select",options:f.map(l=>({label:l,value:l}))})}else return w.includes(t)?t=="Dynamic Link"?a(i,{type:"text"}):a(O,{class:"form-control",doctype:u}):A.includes(t)?a(i,{type:"number"}):S.includes(t)?a(q):M.includes(t)?a(Z,{variant:"outline",editorClass:"!prose-sm overflow-auto min-h-[80px] max-h-80 py-1.5 px-2 rounded border border-gray-300 bg-white hover:border-gray-400 hover:shadow-sm focus:bg-white focus:border-gray-500 focus:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-gray-400 text-gray-800 transition-colors",bubbleMenu:!0,content:s.value}):a(i,{type:"text"})}return(e,t)=>{const u=_("Button"),f=_("Dialog");return b(),h(f,{modelValue:d.value,"onUpdate:modelValue":t[2]||(t[2]=l=>d.value=l),options:{title:e.__("Bulk Edit")}},{"body-content":V(()=>[r("div",H,[r("div",J,k(e.__("Field")),1),C(T,{value:o.value.label,options:Y(p).data,onChange:t[0]||(t[0]=l=>U(l)),placeholder:e.__("Source")},null,8,["value","options","placeholder"])]),r("div",null,[r("div",K,k(e.__("Value")),1),(b(),h(G(j(o.value)),{value:s.value,size:"md",onChange:t[1]||(t[1]=l=>$(l)),placeholder:e.__("Contact Us")},null,40,["value","placeholder"]))])]),actions:V(()=>[C(u,{class:"w-full",variant:"solid",onClick:F,loading:m.value,label:e.__("Update {0} Records",[L.value])},null,8,["loading","label"])]),_:1},8,["modelValue","options"])}}};export{X as _};
//# sourceMappingURL=EditValueModal-b8257b88.js.map
