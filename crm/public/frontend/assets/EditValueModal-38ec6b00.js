import{D as j}from"./DatePicker-c2c1e28a.js";import{a as q,_ as P}from"./Link-95b990b4.js";import{m as y,u as g,A as R,o as T,z as Y,r as v,d as _,e as b,l as h,i as V,t as r,v as k,h as C,j as I,Q as O,c as Q,ab as a,bj as i,aF as G}from"./index-57f524e0.js";const H={class:"mb-4"},J={class:"mb-1.5 text-sm text-gray-600"},K={class:"mb-1.5 text-sm text-gray-600"},ee={__name:"EditValueModal",props:y({doctype:{type:String,required:!0},selectedValues:{type:Array,required:!0}},{modelValue:{},modelModifiers:{},unselectAll:{},unselectAllModifiers:{}}),emits:y(["reload"],["update:modelValue","update:unselectAll"]),setup(c,{emit:D}){const w=["Check"],x=["Link","Dynamic Link"],A=["Float","Int","Currency","Percent"],M=["Select"],B=["Text Editor"],S=["Date","Datetime"],n=c,d=g(c,"modelValue"),E=g(c,"unselectAll"),F=D,p=R({url:"crm.api.doc.get_fields",cache:["fields",n.doctype],params:{doctype:n.doctype}});T(()=>{var e;(e=p.data)!=null&&e.length||p.fetch()});const L=Y(()=>{var e;return((e=n.selectedValues)==null?void 0:e.size)||0}),o=v({label:"",type:"",value:"",options:""}),s=v(""),m=v(!1);function N(){let e=s.value;o.value.type=="Check"&&(e=e=="Yes"?1:0),m.value=!0,Q("frappe.desk.doctype.bulk_update.bulk_update.submit_cancel_or_update_docs",{doctype:n.doctype,docnames:Array.from(n.selectedValues),action:"update",data:{[o.value.value]:e||null}}).then(()=>{o.value={label:"",type:"",value:"",options:""},s.value="",m.value=!1,d.value=!1,E.value(),F("reload")})}function z(e){s.value="",e&&(o.value=e)}function U(e){let t=e.target?e.target.value:e;s.value=t}function $(e){const{type:t,options:u}=e;if(M.includes(t)||w.includes(t)){const f=t=="Check"?["Yes","No"]:getSelectOptions(u);return a(i,{type:"select",options:f.map(l=>({label:l,value:l}))})}else return x.includes(t)?t=="Dynamic Link"?a(i,{type:"text"}):a(P,{class:"form-control",doctype:u}):A.includes(t)?a(i,{type:"number"}):S.includes(t)?a(j):B.includes(t)?a(G,{variant:"outline",editorClass:"!prose-sm overflow-auto min-h-[80px] max-h-80 py-1.5 px-2 rounded border border-gray-300 bg-white hover:border-gray-400 hover:shadow-sm focus:bg-white focus:border-gray-500 focus:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-gray-400 text-gray-800 transition-colors",bubbleMenu:!0,content:s.value}):a(i,{type:"text"})}return(e,t)=>{const u=_("Button"),f=_("Dialog");return b(),h(f,{modelValue:d.value,"onUpdate:modelValue":t[2]||(t[2]=l=>d.value=l),options:{title:e.__("Bulk Edit")}},{"body-content":V(()=>[r("div",H,[r("div",J,k(e.__("Field")),1),C(q,{value:o.value.label,options:I(p).data,onChange:t[0]||(t[0]=l=>z(l)),placeholder:e.__("Source")},null,8,["value","options","placeholder"])]),r("div",null,[r("div",K,k(e.__("Value")),1),(b(),h(O($(o.value)),{value:s.value,size:"md",onChange:t[1]||(t[1]=l=>U(l)),placeholder:e.__("Contact Us")},null,40,["value","placeholder"]))])]),actions:V(()=>[C(u,{class:"w-full",variant:"solid",onClick:N,loading:m.value,label:e.__("Update {0} Records",[L.value])},null,8,["loading","label"])]),_:1},8,["modelValue","options"])}}};export{ee as _};
//# sourceMappingURL=EditValueModal-38ec6b00.js.map
