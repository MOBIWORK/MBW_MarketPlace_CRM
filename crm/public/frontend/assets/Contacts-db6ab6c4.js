import{_ as A}from"./CustomActions-58617369.js";import{aW as B,r,A as m,d as k,e as d,f as x,h as s,i as p,l as F,v as U,x as I,q as z,F as L,N,M as P,j as E,a7 as T,R}from"./index-feace97c.js";import{_ as S,a as j}from"./LayoutHeader-3b315ab2.js";import{C as W}from"./ContactModal-fc242e15.js";import{_ as h}from"./ContactsListView-e70e3f76.js";import{_ as q}from"./ViewControls-7d3f17d3.js";import{o as D}from"./organizations-ec6af7b8.js";import"./Fields-28ea0d6a.js";import"./EditIcon-22d4c2fc.js";import"./IndicatorIcon-b88f6a43.js";import"./EditValueModal-e8df9092.js";import"./DatePicker-ac08acad.js";import"./label-b3289697.js";import"./ListView-1082e127.js";import"./DatetimePicker-56ea989f.js";const O={key:1,class:"flex h-full items-center justify-center"},G={class:"flex flex-col items-center gap-3 text-xl font-medium text-gray-500"},ie={__name:"Contacts",setup(H){const{getOrganization:M}=D(),w=B(),i=r(!1),f=m(()=>{var t,e,u;return(u=(e=(t=o.value)==null?void 0:t.data)==null?void 0:e.data)==null?void 0:u.find(l=>l.name===w.params.contactId)}),$=m(()=>{let t=[{label:__("Contacts"),route:{name:"Contacts"}}];return f.value&&t.push({label:__(f.value.full_name),route:{name:"Contact",params:{contactId:f.value.name}}}),t}),v=r(null),o=r({}),_=r(1),C=r(1),c=r(20),y=r(null);m(()=>{var t;return(t=o.value)==null?void 0:t.data.columns.forEach(e=>{e.key==="full_name"&&(e.key="first_name")})});const V=m(()=>{var t,e,u;return(e=(t=o.value)==null?void 0:t.data)!=null&&e.data?(u=o.value)==null?void 0:u.data.data.map(l=>{var g;let a={};return(g=o.value)==null||g.data.rows.forEach(n=>{var b;a[n]=l[n],n=="first_name"?a[n]={label:l.first_name,image_label:l.first_name,image:l.image}:n=="company_name"?a[n]={label:l.company_name,logo:(b=M(l.company_name))==null?void 0:b.organization_logo}:["modified","creation"].includes(n)&&(a[n]={label:N(l[n],R),timeAgo:__(P(l[n]))})}),a}):[]});return(t,e)=>{const u=k("FeatherIcon"),l=k("Button");return d(),x(L,null,[s(S,null,{"left-header":p(()=>[s(E(j),{items:$.value},null,8,["items"])]),"right-header":p(()=>{var a;return[(a=v.value)!=null&&a.customListActions?(d(),F(A,{key:0,actions:v.value.customListActions},null,8,["actions"])):z("",!0),s(l,{variant:"solid",label:t.__("Create"),onClick:e[0]||(e[0]=g=>i.value=!0)},{prefix:p(()=>[s(u,{name:"plus",class:"h-4"})]),_:1},8,["label"])]}),_:1}),s(q,{ref_key:"viewControls",ref:y,modelValue:o.value,"onUpdate:modelValue":e[1]||(e[1]=a=>o.value=a),loadMore:_.value,"onUpdate:loadMore":e[2]||(e[2]=a=>_.value=a),resizeColumn:C.value,"onUpdate:resizeColumn":e[3]||(e[3]=a=>C.value=a),updatedPageCount:c.value,"onUpdate:updatedPageCount":e[4]||(e[4]=a=>c.value=a),doctype:"Contact",showElement:!0,placeholderText:t.__("Search customer")},null,8,["modelValue","loadMore","resizeColumn","updatedPageCount","placeholderText"]),o.value.data&&V.value.length?(d(),F(h,{key:0,ref_key:"contactsListView",ref:v,modelValue:o.value.data.page_length_count,"onUpdate:modelValue":e[5]||(e[5]=a=>o.value.data.page_length_count=a),list:o.value,"onUpdate:list":e[6]||(e[6]=a=>o.value=a),rows:V.value,columns:o.value.data.columns,options:{showTooltip:!1,resizeColumn:!0,rowCount:o.value.data.row_count,totalCount:o.value.data.total_count},onLoadMore:e[7]||(e[7]=()=>_.value++),onColumnWidthUpdated:e[8]||(e[8]=()=>C.value++),onUpdatePageCount:e[9]||(e[9]=a=>c.value=a),onApplyFilter:e[10]||(e[10]=a=>y.value.applyFilter(a))},null,8,["modelValue","list","rows","columns","options"])):o.value.data?(d(),x("div",O,[U("div",G,[s(T,{class:"h-10 w-10"}),U("span",null,I(t.__("No {0} Found",[t.__("Contacts")])),1),s(l,{label:t.__("Create"),onClick:e[11]||(e[11]=a=>i.value=!0)},{prefix:p(()=>[s(u,{name:"plus",class:"h-4"})]),_:1},8,["label"])])])):z("",!0),s(W,{modelValue:i.value,"onUpdate:modelValue":e[12]||(e[12]=a=>i.value=a),contact:{}},null,8,["modelValue"])],64)}}};export{ie as default};
//# sourceMappingURL=Contacts-db6ab6c4.js.map
