import{_ as H,e as i,f as m,v as u,r as F,o as Q,aD as O,d as z,aG as P,aK as Z,x as w,h as r,as as K,ar as X,j as p,bm as Y,l as C,i as d,t as I,q as $,y as N,z as S,F as U,k as L,n as D,E as ee,H as E,b3 as te,a6 as T,aJ as q,b as G}from"./index-d8c5d38f.js";import{E as oe,_ as ae}from"./EditIcon-4b2b470e.js";import{I as ne}from"./IndicatorIcon-873e62a8.js";const se={},le={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},re=u("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M14 8C14 11.3137 11.3137 14 8 14C4.68629 14 2 11.3137 2 8C2 4.68629 4.68629 2 8 2C11.3137 2 14 4.68629 14 8ZM15 8C15 11.866 11.866 15 8 15C4.13401 15 1 11.866 1 8C1 4.13401 4.13401 1 8 1C11.866 1 15 4.13401 15 8ZM11.2909 5.98482C11.4666 5.77175 11.4363 5.45663 11.2232 5.28096C11.0101 5.1053 10.695 5.13561 10.5193 5.34868L7.07001 9.53239L5.72845 7.79857C5.55946 7.58018 5.24543 7.54012 5.02703 7.70911C4.80863 7.8781 4.76858 8.19214 4.93756 8.41053L6.66217 10.6394C6.7552 10.7596 6.89788 10.831 7.04988 10.8334C7.20188 10.8357 7.3467 10.7688 7.4434 10.6515L11.2909 5.98482Z",fill:"currentColor"},null,-1),ce=[re];function ie(n,b){return i(),m("svg",le,ce)}const ue=H(se,[["render",ie]]),de={class:"group flex w-full items-center justify-between rounded bg-transparent p-1 pl-2 text-base text-gray-800 transition-colors hover:bg-gray-200 active:bg-gray-300"},me={class:"flex items-center justify-between gap-7"},he={class:"actions flex items-center justify-center"},pe={__name:"DropdownItem",props:{option:{type:Object,default:()=>{}}},setup(n){const b=n,y=F(!1),h=F(!1),g=F(null);Q(()=>{var V;(V=b.option)!=null&&V.value||(y.value=!0,h.value=!0,O(()=>g.value.el.focus()))});const _=()=>{y.value=!y.value,y.value&&O(()=>g.value.el.focus())},f=()=>{_(),b.option.onSave(b.option,h.value),h.value=!1};return(V,x)=>{const B=z("Button"),A=z("FeatherIcon");return i(),m("div",de,[u("div",me,[P(u("div",null,w(n.option.value),513),[[Z,!y.value]]),P(r(p(Y),{ref_key:"inputRef",ref:g,modelValue:n.option.value,"onUpdate:modelValue":x[0]||(x[0]=k=>n.option.value=k),class:"w-full",placeholder:n.option.placeholder,onBlur:K(f,["stop"]),onKeydown:x[1]||(x[1]=X(K(k=>k.target.blur(),["stop"]),["enter"]))},null,8,["modelValue","placeholder"]),[[Z,y.value]]),u("div",he,[!h.value&&!n.option.selected?(i(),C(p(I),{key:0,text:"Set As Primary"},{default:d(()=>[u("div",null,[r(B,{variant:"ghost",size:"sm",class:"opacity-0 hover:bg-gray-300 group-hover:opacity-100",onClick:n.option.onClick},{default:d(()=>[r(ue)]),_:1},8,["onClick"])])]),_:1})):$("",!0),r(p(I),{text:"Edit"},{default:d(()=>[u("div",null,[r(B,{variant:"ghost",size:"sm",class:"opacity-0 hover:bg-gray-300 group-hover:opacity-100",onClick:_},{default:d(()=>[r(oe)]),_:1})])]),_:1}),r(p(I),{text:"Delete"},{default:d(()=>[u("div",null,[r(B,{variant:"ghost",icon:"x",size:"sm",class:"opacity-0 hover:bg-gray-300 group-hover:opacity-100",onClick:x[2]||(x[2]=()=>n.option.onDelete(n.option,h.value))})])]),_:1})])]),u("div",null,[n.option.selected?(i(),C(A,{key:0,name:"check",class:"text-primary-500 h-4 w-6",size:"sm"})):$("",!0)])])}}};const ve={class:"flex flex-col gap-4"},ye={class:"mb-2 text-sm text-gray-600",style:{display:"flex","justify-content":"space-between"}},ge={key:0,class:"text-red-500"},_e={key:1},fe={class:"cursor-pointer"},xe={key:3},be={class:"truncate"},we={class:"my-2 space-y-1.5 divide-y rounded-lg border border-gray-100 bg-white p-1.5 shadow-xl"},Ce={key:1},ke={class:"p-1.5 px-7 text-base text-gray-500"},$e={class:"pt-1.5"},Ve={key:4},Be={class:"w-[100px]"},je={key:0},Ee={class:"py-1"},Fe={key:6},Ie={style:{display:"flex","justify-content":"space-between"},class:"mt-2"},Me={class:"whitespace-pre-line text-sm text-red-600"},De=["onClick"],ze={__name:"Fields",props:{sections:Array,data:Object},setup(n){const{getUser:b}=N(),y=n;S({});const h=S({}),g=F(!1),_=S({}),f=F(""),V=(t,o)=>{},x=()=>{g.value=!g.value},B=t=>{y.data[t]=f.value,_[t]=!1,f.value=""},A=(t,o)=>{const c=/^[\w-]+(?:\.[\w-]+)*@(?:[\w-]+\.)+[a-zA-Z]{2,}$/,a=/^(\+84|0)\d{9}$/;if(t!=null&&t!=""){if((o=="email"||o=="email_id")&&(c.test(t)?delete h[o]:h[o]=__("Invalid Email"),J(t)?(_[o]=!1,f.value=""):(_[o]=!0,f.value=W(t))),o=="mobile_no"||o=="actual_mobile_no"){a.test(t)?delete h[o]:h[o]=__("Invalid phone number");const l=t.replace(/\s+/g,"").replace(/^(\+?84|0)/,"0");y.data[o]=l}}else(o=="email"||o=="email_id")&&(delete h[o],_[o]=!1,f.value=""),(o=="mobile_no"||o=="actual_mobile_no")&&delete h[o]},k=(t,o)=>{const c=[];for(let a=0;a<=o.length;a++)c[a]=[a];for(let a=0;a<=t.length;a++)c[0][a]=a;for(let a=1;a<=o.length;a++)for(let l=1;l<=t.length;l++)o.charAt(a-1)===t.charAt(l-1)?c[a][l]=c[a-1][l-1]:c[a][l]=Math.min(c[a-1][l-1]+1,Math.min(c[a][l-1]+1,c[a-1][l]+1));return c[o.length][t.length]},J=t=>{const o=["gmail.com","yahoo.com","hotmail.com","outlook.com"],c=t.split("@");if(c.length!==2)return!0;const a=c[1];if(o.indexOf(a)>=0)return!0;{const l=["gmail.com","yahoo.com","hotmail.com","outlook.com"],e=t.split("@");if(e.length!==2)return G({title:__("Error"),text:__("Lỗi định dạng email"),icon:"x",iconClasses:"text-red-600"}),t;const s=e[1];let v=1/0,j=-1;for(let M=0;M<l.length;M++){const R=k(s,l[M]);R<v&&(v=R,j=M)}return j==-1}},W=t=>{const o=["gmail.com","yahoo.com","hotmail.com","outlook.com"],c=t.split("@");if(c.length!==2)return G({title:__("Error"),text:__("Lỗi định dạng email"),icon:"x",iconClasses:"text-red-600"}),t;const a=c[1];let l=a,e=1/0,s=-1;for(let v=0;v<o.length;v++){const j=k(a,o[v]);j<e&&(e=j,s=v,l=o[v])}return s!=-1?`${c[0]}@${l}`:t};return(t,o)=>{const c=z("FormControl"),a=z("Button");return i(),m("div",ve,[(i(!0),m(U,null,L(n.sections,l=>(i(),m("div",{key:l.section,class:D(["first:border-t-0 first:pt-0",l.hideBorder?"":"border-t pt-4"])},[u("div",{class:D(["grid gap-4",l.columns?"grid-cols-"+l.columns:"grid-cols-3"])},[(i(!0),m(U,null,L(l.fields,e=>(i(),m("div",{key:e.name},[u("div",ye,[ee(w(t.__(e.label))+" ",1),e.mandatory?(i(),m("span",ge,"*")):$("",!0),h[e.name]?(i(),m("div",_e,[r(p(I),{text:h[e.name],placement:"top"},{default:d(()=>[r(p(E),{name:"alert-triangle",class:"h-4 w-4 text-red-500"})]),_:2},1032,["text"])])):$("",!0)]),e.type==="select"?(i(),C(c,{key:0,type:"select",class:D(["form-control",e.prefix?"prefix":""]),options:e.options,modelValue:n.data[e.name],"onUpdate:modelValue":s=>n.data[e.name]=s,placeholder:t.__(e.placeholder)},te({_:2},[e.prefix?{name:"prefix",fn:d(()=>[r(ne,{class:D(e.prefix)},null,8,["class"])]),key:"0"}:void 0]),1032,["class","options","modelValue","onUpdate:modelValue","placeholder"])):e.type==="link"?(i(),C(T,{key:1,class:"form-control",value:n.data[e.name],doctype:e.doctype,onChange:s=>n.data[e.name]=s,placeholder:t.__(e.placeholder),onCreate:e.create},null,8,["value","doctype","onChange","placeholder","onCreate"])):e.type==="user"?(i(),C(T,{key:2,class:"form-control",value:p(b)(n.data[e.name]).full_name,doctype:e.doctype,onChange:s=>n.data[e.name]=s,placeholder:t.__(e.placeholder),hideMe:!0},{prefix:d(()=>[r(q,{class:"mr-2",user:n.data[e.name],size:"sm"},null,8,["user"])]),"item-prefix":d(({option:s})=>[r(q,{class:"mr-2",user:s.value,size:"sm"},null,8,["user"])]),"item-label":d(({option:s})=>[r(p(I),{text:s.value},{default:d(()=>[u("div",fe,w(p(b)(s.value).full_name),1)]),_:2},1032,["text"])]),_:2},1032,["value","doctype","onChange","placeholder"])):e.type==="dropdown"?(i(),m("div",xe,[r(ae,null,{target:d(({open:s})=>[r(a,{label:n.data[e.name],class:"dropdown-button flex w-full items-center justify-between rounded border border-gray-100 bg-gray-100 px-2 py-1.5 text-base text-gray-800 placeholder-gray-500 transition-colors hover:border-gray-200 hover:bg-gray-200 focus:border-gray-500 focus:bg-white focus:shadow-sm focus:outline-none focus:ring-0 focus-visible:ring-2 focus-visible:ring-gray-400"},{suffix:d(()=>[r(p(E),{name:s?"chevron-up":"chevron-down",class:"h-4 text-gray-600"},null,8,["name"])]),default:d(()=>[u("div",be,w(n.data[e.name]),1)]),_:2},1032,["label"])]),body:d(()=>{var s;return[u("div",we,[u("div",null,[(s=e.options)!=null&&s.length?(i(!0),m(U,{key:0},L(e.options,v=>(i(),C(pe,{key:v.name,option:v},null,8,["option"]))),128)):(i(),m("div",Ce,[u("div",ke,w(t.__("No {0} Available",[e.label])),1)]))]),u("div",$e,[r(a,{variant:"ghost",class:"w-full !justify-start",label:t.__("Create New"),onClick:v=>e.create()},{prefix:d(()=>[r(p(E),{name:"plus",class:"h-4"})]),_:2},1032,["label","onClick"])])])]}),_:2},1024)])):e.type==="dropdownNote"?(i(),m("div",Ve,[u("div",Be,[r(a,{label:t.__("Note"),class:"dropdown-button flex w-full items-center justify-between rounded border border-gray-100 bg-gray-100 px-2 py-1.5 text-base text-gray-800 placeholder-gray-500 transition-colors hover:border-gray-200 hover:bg-gray-200 focus:border-gray-500 focus:bg-white focus:shadow-sm focus:outline-none focus:ring-0 focus-visible:ring-2 focus-visible:ring-gray-400",onClick:o[0]||(o[0]=s=>x())},{suffix:d(()=>[r(p(E),{name:g.value?"chevron-up":"chevron-down",class:"h-4 text-gray-600"},null,8,["name"])]),_:1},8,["label"])]),g.value?(i(),m("div",je,[u("div",Ee,[r(c,{type:"textarea",placeholder:t.__("Write Content..."),modelValue:n.data[e.name],"onUpdate:modelValue":s=>n.data[e.name]=s},null,8,["placeholder","modelValue","onUpdate:modelValue"])])])):$("",!0)])):(i(),C(c,{key:5,type:"text",placeholder:t.__(e.placeholder),modelValue:n.data[e.name],"onUpdate:modelValue":s=>n.data[e.name]=s,onFocus:s=>V(n.data[e.name],e.name),onBlur:s=>A(n.data[e.name],e.name)},null,8,["placeholder","modelValue","onUpdate:modelValue","onFocus","onBlur"])),_[e.name]?(i(),m("div",Fe,[u("div",Ie,[u("div",Me,w(t.__("Correct format"))+': "'+w(f.value)+'"',1),u("div",{style:{cursor:"pointer"},onClick:s=>B(e.name)},[r(p(E),{name:"check",class:"h-4 w-4 text-red-500",style:{"font-size":"12px"}})],8,De)])])):$("",!0)]))),128))],2)],2))),128))])}}},Le=H(ze,[["__scopeId","data-v-35b714b1"]]);export{Le as F,ue as S};
//# sourceMappingURL=Fields-b43734f0.js.map
