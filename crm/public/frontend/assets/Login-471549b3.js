import{C as L,r as f,A as C,d as p,e as a,f as l,t as r,h as i,j as t,al as k,R as c,i as y,p as g,F as V,k as M,dw as j,aj as _,v as B}from"./index-57f524e0.js";const E={class:"flex h-screen w-screen justify-center bg-gray-100"},R={class:"mt-32 w-full px-4"},S=r("div",{class:"mt-6 flex items-center justify-center space-x-1.5"},[r("span",{class:"text-3xl font-semibold text-gray-900"},"Login to CRM")],-1),F={class:"mx-auto mt-6 w-full px-4 sm:w-96"},N={class:"mt-4"},T={key:1,class:"mx-auto space-y-2"},P=["href"],z=["innerHTML"],A={__name:"Login",setup(H){const u=L();let s=f(!1),n=f(""),d=f(""),m=C({url:"crm.api.auth.oauth_providers",auto:!0,onSuccess(h){s.value=h.length===0}});m.fetch();function w(){u.login.submit({usr:n.value,pwd:d.value})}return(h,o)=>{const v=p("FormControl"),b=p("ErrorMessage"),x=p("Button");return a(),l("div",E,[r("div",R,[i(j,{class:"mx-auto h-10"}),S,r("div",F,[t(s)?(a(),l("form",{key:0,method:"POST",action:"/api/method/login",onSubmit:k(w,["prevent"])},[r("div",null,[i(v,{variant:"outline",size:"md",type:(t(n)||"").toLowerCase()==="administrator"?"text":"email",label:"Email",modelValue:t(n),"onUpdate:modelValue":o[0]||(o[0]=e=>c(n)?n.value=e:n=e),placeholder:"jane@example.com",disabled:t(u).login.loading},null,8,["type","modelValue","disabled"])]),r("div",N,[i(v,{variant:"outline",size:"md",label:"Password",modelValue:t(d),"onUpdate:modelValue":o[1]||(o[1]=e=>c(d)?d.value=e:d=e),placeholder:"••••••",disabled:t(u).login.loading,type:"password"},null,8,["modelValue","disabled"])]),i(b,{class:"mt-2",message:t(u).login.error},null,8,["message"]),i(x,{variant:"solid",class:"mt-6 w-full",loading:t(u).login.loading},{default:y(()=>[_(" Login ")]),_:1},8,["loading"]),t(m).data.length?(a(),l("button",{key:0,class:"mt-2 w-full py-2 text-base text-gray-600",onClick:o[2]||(o[2]=e=>c(s)?s.value=!1:s=!1)}," Login using other methods ")):g("",!0)],32)):g("",!0),t(m).data&&!t(s)?(a(),l("div",T,[i(x,{onClick:o[3]||(o[3]=e=>c(s)?s.value=!0:s=!0),variant:"solid",class:"w-full"},{default:y(()=>[_(" Login via email ")]),_:1}),(a(!0),l(V,null,M(t(m).data,e=>(a(),l("a",{class:"flex justify-center items-center gap-2 w-full rounded border bg-gray-900 px-3 py-1 text-center text-base h-7 focus:outline-none focus:ring-2 focus:ring-gray-400 text-white transition-colors hover:bg-gray-700",key:e.name,href:e.auth_url},[e.icon?(a(),l("div",{key:0,innerHTML:e.icon},null,8,z)):g("",!0),_(" Login via "+B(e.provider_name),1)],8,P))),128))])):g("",!0)])])])}}};export{A as default};
//# sourceMappingURL=Login-471549b3.js.map
