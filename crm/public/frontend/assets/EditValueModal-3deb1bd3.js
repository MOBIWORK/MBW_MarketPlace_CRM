import{D as O}from"./DatePicker-808a1e66.js";import{z as V,B as k,A as P,Q as Y,H as G,c as H,G as _,s as b,o as C,a as x,w as d,d as u,t as g,f as h,bp as I,u as w,a7 as J,b3 as Q,J as j,ar as a,R as r,af as K,aO as W}from"./index-fd4111d0.js";const X={class:"mb-4"},Z={class:"mb-1.5 text-sm text-gray-600"},ee={class:"mb-1.5 text-sm text-gray-600"},te={class:"cursor-pointer"},oe={__name:"EditValueModal",props:V({doctype:{type:String,required:!0},selectedValues:{type:Array,required:!0}},{modelValue:{},modelModifiers:{},unselectAll:{},unselectAllModifiers:{}}),emits:V(["reload"],["update:modelValue","update:unselectAll"]),setup(p,{emit:D}){const A=["Check"],S=["Link","Dynamic Link"],B=["Float","Int","Currency","Percent"],M=["Select"],E=["Text Editor"],L=["Date","Datetime"],n=p,m=k(p,"modelValue"),N=k(p,"unselectAll"),{getUser:R}=P(),T=D,v=Y({url:"crm.api.doc.get_fields",cache:["fields",n.doctype],params:{doctype:n.doctype}});G(()=>{var e;(e=v.data)!=null&&e.length||v.fetch()});const z=H(()=>{var e;return((e=n.selectedValues)==null?void 0:e.size)||0}),o=_({label:"",type:"",value:"",options:""}),s=_(""),f=_(!1);function F(){let e=s.value;o.value.type=="Check"&&(e=e=="Yes"?1:0),f.value=!0,j("frappe.desk.doctype.bulk_update.bulk_update.submit_cancel_or_update_docs",{doctype:n.doctype,docnames:Array.from(n.selectedValues),action:"update",data:{[o.value.value]:e||null}}).then(()=>{o.value={label:"",type:"",value:"",options:""},s.value="",f.value=!1,m.value=!1,N.value(),T("reload")})}function U(e){s.value="",e&&(o.value=e)}function $(e){let t=e.target?e.target.value:e;s.value=t}function q(e){const{type:t,options:i}=e;if(M.includes(t)||A.includes(t)){const y=t=="Check"?["Yes","No"]:getSelectOptions(i);return a(r,{type:"select",options:y.map(c=>({label:c,value:c}))})}else return S.includes(t)?t=="Dynamic Link"?a(r,{type:"text"}):a(K,{class:"form-control",doctype:i}):B.includes(t)?a(r,{type:"number"}):L.includes(t)?a(O):E.includes(t)?a(W,{variant:"outline",editorClass:"!prose-sm overflow-auto min-h-[80px] max-h-80 py-1.5 px-2 rounded border border-gray-300 bg-white hover:border-gray-400 hover:shadow-sm focus:bg-white focus:border-gray-500 focus:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-gray-400 text-gray-800 transition-colors",bubbleMenu:!0,content:s.value}):t=="Rating"?a(r,{type:"select",options:[{label:1,value:.2},{label:2,value:.4},{label:3,value:.6},{label:4,value:.8},{label:5,value:1}]}):a(r,{type:"text"})}return(e,t)=>{const i=b("Tooltip"),y=b("Button"),c=b("Dialog");return C(),x(c,{modelValue:m.value,"onUpdate:modelValue":t[2]||(t[2]=l=>m.value=l),options:{title:e.__("Bulk Edit")}},{"body-content":d(()=>[u("div",X,[u("div",Z,g(e.__("Field")),1),h(I,{value:o.value.label,options:w(v).data,onChange:t[0]||(t[0]=l=>U(l)),placeholder:e.__("Select field")},null,8,["value","options","placeholder"])]),u("div",null,[u("div",ee,g(e.__("Value")),1),(C(),x(J(q(o.value)),{value:s.value,size:"md",onChange:t[1]||(t[1]=l=>$(l))},Q({_:2},[o.value.value=="lead_owner"?{name:"item-label",fn:d(({option:l})=>[h(i,{text:l.value},{default:d(()=>[u("div",te,g(w(R)(l.value).first_name),1)]),_:2},1032,["text"])]),key:"0"}:void 0]),1064,["value"]))])]),actions:d(()=>[h(y,{class:"w-full",variant:"solid",onClick:F,loading:f.value,label:e.__("Update {0} Records",[z.value])},null,8,["loading","label"])]),_:1},8,["modelValue","options"])}}};export{oe as _};
//# sourceMappingURL=EditValueModal-3deb1bd3.js.map
