import{z as $,A as h,B as W,C as q,D as J,E as y,G as O,H as j,I as A,J as M,s as z,o as a,b as r,f as s,w as d,u as n,F,x as G,a as C,K as B,k as v,P as H,L as K,d as Q,t as D,M as X,n as Y}from"./index-b021dd3e.js";import{_ as Z}from"./EditValueModal-89794f46.js";import{_ as ee,a as te,b as oe,c as le,e as ae,d as se}from"./ListView-913eec95.js";import{_ as ne}from"./DatePicker-ecb1c2b9.js";const ie={key:0},ue={key:1},re={key:2},de=["onClick"],ce={key:1},me=["onClick"],Ce={__name:"ContactsListView",props:$({rows:{type:Array,required:!0},columns:{type:Array,required:!0},options:{type:Object,default:()=>({selectable:!0,showTooltip:!0,resizeColumn:!1,totalCount:0,rowCount:0})}},{modelValue:{},modelModifiers:{},list:{},listModifiers:{}}),emits:$(["loadMore","updatePageCount","columnWidthUpdated","applyFilter","update:selections"],["update:modelValue","update:list"]),setup(i,{expose:L,emit:R}){const m=R,f=h(i,"modelValue"),p=h(i,"list"),U=W(),{$dialog:g}=q();J(f,(t,e)=>{t!==e&&m("updatePageCount",t)});const k=y(!1),V=y([]),b=y(()=>{});function E(t,e){V.value=t,k.value=!0,b.value=e}function S(t,e){g({title:__("Delete"),message:__("Are you sure you want to delete {0} item(s)?",[t.size]),variant:"danger",actions:[{label:__("Delete"),variant:"solid",theme:"red",onClick:u=>{A("frappe.desk.reportview.delete_items",{items:JSON.stringify(Array.from(t)),doctype:"FCRM Contact"}).then(()=>{M({title:__("Deleted successfully"),icon:"check",iconClasses:"text-green-600"}),e(),p.value.reload(),u()})}}]})}const x=y([]);function N(t,e){return[{label:__("Edit"),onClick:()=>E(t,e)},{label:__("Delete"),onClick:()=>S(t,e)}]}function P(t){let e=[];t.forEach(u=>{e.push(u)}),m("update:selections",e)}return O(()=>{var t,e,u;(t=p.value)!=null&&t.data&&(j(p.value.data,{list:p.value,call:A,createToast:M,$dialog:g,router:U}),x.value=((u=(e=p.value)==null?void 0:e.data)==null?void 0:u.listActions)||[])}),L({customListActions:x}),(t,e)=>{const u=z("FormControl"),T=z("Button");return a(),r(F,null,[s(n(se),{class:Y(t.$attrs.class),columns:i.columns,rows:i.rows,options:{getRowRoute:o=>({name:"Contact",params:{contactId:o.name}}),selectable:i.options.selectable,showTooltip:i.options.showTooltip,resizeColumn:i.options.resizeColumn},"row-key":"name","onUpdate:selections":e[1]||(e[1]=o=>P(o))},{default:d(()=>[s(n(ee),{class:"mx-5",onColumnWidthUpdated:e[0]||(e[0]=o=>m("columnWidthUpdated"))}),s(n(te),{id:"list-rows"},{default:d(()=>[(a(!0),r(F,null,G(i.rows,o=>(a(),C(n(le),{class:"mx-5",key:o.name,row:o},{default:d(({idx:_,column:c,item:l})=>[s(n(oe),{item:l},{prefix:d(()=>[c.key==="full_name"?(a(),r("div",ie,[l.label?(a(),C(n(B),{key:0,class:"flex items-center",image:l.image,label:l.image_label,size:"sm"},null,8,["image","label"])):v("",!0)])):c.key==="company_name"?(a(),r("div",ue,[l.label?(a(),C(n(B),{key:0,class:"flex items-center",image:l.logo,label:l.label,size:"sm"},null,8,["image","label"])):v("",!0)])):c.key==="mobile_no"?(a(),r("div",re,[s(H,{class:"h-4 w-4"})])):v("",!0)]),default:d(({label:I})=>[["modified","creation"].includes(c.key)?(a(),r("div",{key:0,class:"truncate text-base",onClick:w=>m("applyFilter",{event:w,idx:_,column:c,item:l})},[s(n(K),{text:l.label},{default:d(()=>[Q("div",null,D(l.timeAgo),1)]),_:2},1032,["text"])],8,de)):c.type==="Check"?(a(),r("div",ce,[s(u,{type:"checkbox",modelValue:l,disabled:!0,class:"text-gray-900"},null,8,["modelValue"])])):(a(),r("div",{key:2,class:"truncate text-base",onClick:w=>m("applyFilter",{event:w,idx:_,column:c,item:l})},D(t.__(I)),9,me))]),_:2},1032,["item"])]),_:2},1032,["row"]))),128))]),_:1}),s(n(ae),null,{actions:d(({selections:o,unselectAll:_})=>[s(n(X),{options:N(o,_)},{default:d(()=>[s(T,{icon:"more-horizontal",variant:"ghost"})]),_:2},1032,["options"])]),_:1})]),_:1},8,["class","columns","rows","options"]),f.value?(a(),C(n(ne),{key:0,class:"border-t px-5 py-2",modelValue:f.value,"onUpdate:modelValue":e[2]||(e[2]=o=>f.value=o),options:{rowCount:i.options.rowCount,totalCount:i.options.totalCount},onLoadMore:e[3]||(e[3]=o=>m("loadMore"))},null,8,["modelValue","options"])):v("",!0),s(Z,{modelValue:k.value,"onUpdate:modelValue":e[4]||(e[4]=o=>k.value=o),unselectAll:b.value,"onUpdate:unselectAll":e[5]||(e[5]=o=>b.value=o),doctype:"FCRM Contact",selectedValues:V.value,onReload:e[6]||(e[6]=o=>p.value.reload())},null,8,["modelValue","unselectAll","selectedValues"])],64)}}};export{Ce as _};
//# sourceMappingURL=ContactsListView-d8251176.js.map
