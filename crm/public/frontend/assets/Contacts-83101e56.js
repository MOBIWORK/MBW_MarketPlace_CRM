import{_ as B}from"./CustomActions-ca5e2014.js";import{aO as I,r,z as m,d as k,e as d,f as z,h as s,i as p,l as F,t as U,v as A,p as x,F as E,G as L,E as P,j as N,$ as T,I as S}from"./index-57f524e0.js";import{_ as j,a as O}from"./LayoutHeader-1b75ebc1.js";import{C as R}from"./ContactModal-f10d59c5.js";import{_ as h}from"./ContactsListView-e31d8038.js";import{_ as D}from"./ViewControls-d060515f.js";import{o as G}from"./organizations-8c40ce9c.js";import"./Fields-05088d1a.js";import"./EditIcon-79477f55.js";import"./IndicatorIcon-42fe5203.js";import"./Link-95b990b4.js";import"./EditValueModal-38ec6b00.js";import"./DatePicker-c2c1e28a.js";import"./label-cf4377fb.js";import"./ListView-59a15338.js";import"./DatetimePicker-9b4bd588.js";const W={key:1,class:"flex h-full items-center justify-center"},q={class:"flex flex-col items-center gap-3 text-xl font-medium text-gray-500"},me={__name:"Contacts",setup(H){const{getOrganization:$}=G(),w=I(),i=r(!1),f=m(()=>{var t,e,u;return(u=(e=(t=o.value)==null?void 0:t.data)==null?void 0:e.data)==null?void 0:u.find(l=>l.name===w.params.contactId)}),M=m(()=>{let t=[{label:__("Contacts"),route:{name:"Contacts"}}];return f.value&&t.push({label:__(f.value.full_name),route:{name:"Contact",params:{contactId:f.value.name}}}),t}),v=r(null),o=r({}),_=r(1),C=r(1),c=r(20),y=r(null);m(()=>{var t;return(t=o.value)==null?void 0:t.data.columns.forEach(e=>{e.key==="full_name"&&(e.key="first_name")})});const V=m(()=>{var t,e,u;return(e=(t=o.value)==null?void 0:t.data)!=null&&e.data?(u=o.value)==null?void 0:u.data.data.map(l=>{var g;let a={};return(g=o.value)==null||g.data.rows.forEach(n=>{var b;a[n]=l[n],n=="first_name"?a[n]={label:l.first_name,image_label:l.first_name,image:l.image}:n=="company_name"?a[n]={label:l.company_name,logo:(b=$(l.company_name))==null?void 0:b.organization_logo}:["modified","creation"].includes(n)&&(a[n]={label:L(l[n],S),timeAgo:__(P(l[n]))})}),a}):[]});return(t,e)=>{const u=k("FeatherIcon"),l=k("Button");return d(),z(E,null,[s(j,null,{"left-header":p(()=>[s(N(O),{items:M.value},null,8,["items"])]),"right-header":p(()=>{var a;return[(a=v.value)!=null&&a.customListActions?(d(),F(B,{key:0,actions:v.value.customListActions},null,8,["actions"])):x("",!0),s(l,{variant:"solid",label:t.__("Create"),onClick:e[0]||(e[0]=g=>i.value=!0)},{prefix:p(()=>[s(u,{name:"plus",class:"h-4"})]),_:1},8,["label"])]}),_:1}),s(D,{ref_key:"viewControls",ref:y,modelValue:o.value,"onUpdate:modelValue":e[1]||(e[1]=a=>o.value=a),loadMore:_.value,"onUpdate:loadMore":e[2]||(e[2]=a=>_.value=a),resizeColumn:C.value,"onUpdate:resizeColumn":e[3]||(e[3]=a=>C.value=a),updatedPageCount:c.value,"onUpdate:updatedPageCount":e[4]||(e[4]=a=>c.value=a),doctype:"Contact",showElement:!0,placeholderText:t.__("Search customer")},null,8,["modelValue","loadMore","resizeColumn","updatedPageCount","placeholderText"]),o.value.data&&V.value.length?(d(),F(h,{key:0,ref_key:"contactsListView",ref:v,modelValue:o.value.data.page_length_count,"onUpdate:modelValue":e[5]||(e[5]=a=>o.value.data.page_length_count=a),list:o.value,"onUpdate:list":e[6]||(e[6]=a=>o.value=a),rows:V.value,columns:o.value.data.columns,options:{showTooltip:!1,resizeColumn:!0,rowCount:o.value.data.row_count,totalCount:o.value.data.total_count},onLoadMore:e[7]||(e[7]=()=>_.value++),onColumnWidthUpdated:e[8]||(e[8]=()=>C.value++),onUpdatePageCount:e[9]||(e[9]=a=>c.value=a),onApplyFilter:e[10]||(e[10]=a=>y.value.applyFilter(a))},null,8,["modelValue","list","rows","columns","options"])):o.value.data?(d(),z("div",W,[U("div",q,[s(T,{class:"h-10 w-10"}),U("span",null,A(t.__("No {0} Found",[t.__("Contacts")])),1),s(l,{label:t.__("Create"),onClick:e[11]||(e[11]=a=>i.value=!0)},{prefix:p(()=>[s(u,{name:"plus",class:"h-4"})]),_:1},8,["label"])])])):x("",!0),s(R,{modelValue:i.value,"onUpdate:modelValue":e[12]||(e[12]=a=>i.value=a),contact:{}},null,8,["modelValue"])],64)}}};export{me as default};
//# sourceMappingURL=Contacts-83101e56.js.map
