import{ar as L,e as s,f as u,t as r,r as V,o as Z,B as I,d as k,ay as M,aC as z,v as _,h as a,al as S,ak as A,j as d,bg as N,l as v,i as n,q as C,p as $,x as O,y as R,F,k as j,n as x,aj as T,au as w,aZ as K,aB as E,aF as q}from"./index-57f524e0.js";import{E as P,_ as U}from"./EditIcon-79477f55.js";import{I as W}from"./IndicatorIcon-42fe5203.js";import{_ as D}from"./Link-95b990b4.js";const G={},H={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},J=r("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M14 8C14 11.3137 11.3137 14 8 14C4.68629 14 2 11.3137 2 8C2 4.68629 4.68629 2 8 2C11.3137 2 14 4.68629 14 8ZM15 8C15 11.866 11.866 15 8 15C4.13401 15 1 11.866 1 8C1 4.13401 4.13401 1 8 1C11.866 1 15 4.13401 15 8ZM11.2909 5.98482C11.4666 5.77175 11.4363 5.45663 11.2232 5.28096C11.0101 5.1053 10.695 5.13561 10.5193 5.34868L7.07001 9.53239L5.72845 7.79857C5.55946 7.58018 5.24543 7.54012 5.02703 7.70911C4.80863 7.8781 4.76858 8.19214 4.93756 8.41053L6.66217 10.6394C6.7552 10.7596 6.89788 10.831 7.04988 10.8334C7.20188 10.8357 7.3467 10.7688 7.4434 10.6515L11.2909 5.98482Z",fill:"currentColor"},null,-1),Q=[J];function X(t,y){return s(),u("svg",H,Q)}const Y=L(G,[["render",X]]),ee={class:"group flex w-full items-center justify-between rounded bg-transparent p-1 pl-2 text-base text-gray-800 transition-colors hover:bg-gray-200 active:bg-gray-300"},te={class:"flex items-center justify-between gap-7"},oe={class:"actions flex items-center justify-center"},ae={__name:"DropdownItem",props:{option:{type:Object,default:()=>{}}},setup(t){const y=t,p=V(!1),i=V(!1),b=V(null);Z(()=>{var c;(c=y.option)!=null&&c.value||(p.value=!0,i.value=!0,I(()=>b.value.el.focus()))});const f=()=>{p.value=!p.value,p.value&&I(()=>b.value.el.focus())},l=()=>{f(),y.option.onSave(y.option,i.value),i.value=!1};return(c,m)=>{const h=k("Button"),g=k("FeatherIcon");return s(),u("div",ee,[r("div",te,[M(r("div",null,_(t.option.value),513),[[z,!p.value]]),M(a(d(N),{ref_key:"inputRef",ref:b,modelValue:t.option.value,"onUpdate:modelValue":m[0]||(m[0]=e=>t.option.value=e),class:"w-full",placeholder:t.option.placeholder,onBlur:S(l,["stop"]),onKeydown:m[1]||(m[1]=A(S(e=>e.target.blur(),["stop"]),["enter"]))},null,8,["modelValue","placeholder"]),[[z,p.value]]),r("div",oe,[!i.value&&!t.option.selected?(s(),v(d(C),{key:0,text:"Set As Primary"},{default:n(()=>[r("div",null,[a(h,{variant:"ghost",size:"sm",class:"opacity-0 hover:bg-gray-300 group-hover:opacity-100",onClick:t.option.onClick},{default:n(()=>[a(Y)]),_:1},8,["onClick"])])]),_:1})):$("",!0),a(d(C),{text:"Edit"},{default:n(()=>[r("div",null,[a(h,{variant:"ghost",size:"sm",class:"opacity-0 hover:bg-gray-300 group-hover:opacity-100",onClick:f},{default:n(()=>[a(P)]),_:1})])]),_:1}),a(d(C),{text:"Delete"},{default:n(()=>[r("div",null,[a(h,{variant:"ghost",icon:"x",size:"sm",class:"opacity-0 hover:bg-gray-300 group-hover:opacity-100",onClick:m[2]||(m[2]=()=>t.option.onDelete(t.option,i.value))})])]),_:1})])]),r("div",null,[t.option.selected?(s(),v(g,{key:0,name:"check",class:"text-primary-500 h-4 w-6",size:"sm"})):$("",!0)])])}}};const se={class:"flex flex-col gap-4"},ne={class:"mb-2 text-sm text-gray-600",style:{display:"flex","justify-content":"space-between"}},re={key:0,class:"text-red-500"},le={class:"cursor-pointer"},ce={key:3},ie={class:"truncate"},ue={class:"my-2 space-y-1.5 divide-y rounded-lg border border-gray-100 bg-white p-1.5 shadow-xl"},de={key:1},me={class:"p-1.5 px-7 text-base text-gray-500"},he={class:"pt-1.5"},pe={key:4},ve={class:"my-2 space-y-1.5 divide-y rounded-lg border border-gray-100 bg-white p-1.5 shadow-xl",style:{position:"absolute",left:"105px",top:"-36px"}},ye={class:"min-w-[180px]"},ge={__name:"Fields",props:{sections:Array,data:Object},setup(t){const{getUser:y}=O(),p=t,i=R({}),b=(l,c)=>{},f=(l,c)=>{const m=/^[\w-]+(?:\.[\w-]+)*@(?:[\w-]+\.)+[a-zA-Z]{2,}$/;if(l!=""){if(c=="email"||c=="email_id")l.match(m)?i[c]="":i[c]="Invalid email format";else if(c=="mobile_no"||c=="actual_mobile_no"){const h=l.replace(/\s+/g,"").replace(/^(\+?84|0)/,"0");p.data[c]=h,isNaN(h)||h.length!==10?i[c]=__("Mobile No should be a number"):i[c]=""}}else i[c]=""};return(l,c)=>{const m=k("FormControl"),h=k("Button");return s(),u("div",se,[(s(!0),u(F,null,j(t.sections,g=>(s(),u("div",{key:g.section,class:x(["first:border-t-0 first:pt-0",g.hideBorder?"":"border-t pt-4"])},[r("div",{class:x(["grid gap-4",g.columns?"grid-cols-"+g.columns:"grid-cols-3"])},[(s(!0),u(F,null,j(g.fields,e=>(s(),u("div",{key:e.name},[r("div",ne,[T(_(l.__(e.label))+" ",1),e.mandatory?(s(),u("span",re,"*")):$("",!0),i[e.name]?(s(),v(d(w),{key:1,name:"alert-triangle",class:"h-4 w-4 text-red-500"})):$("",!0)]),e.type==="select"?(s(),v(m,{key:0,type:"select",class:x(["form-control",e.prefix?"prefix":""]),options:e.options,modelValue:t.data[e.name],"onUpdate:modelValue":o=>t.data[e.name]=o,placeholder:l.__(e.placeholder)},K({_:2},[e.prefix?{name:"prefix",fn:n(()=>[a(W,{class:x(e.prefix)},null,8,["class"])]),key:"0"}:void 0]),1032,["class","options","modelValue","onUpdate:modelValue","placeholder"])):e.type==="link"?(s(),v(D,{key:1,class:"form-control",value:t.data[e.name],doctype:e.doctype,onChange:o=>t.data[e.name]=o,placeholder:l.__(e.placeholder),onCreate:e.create},null,8,["value","doctype","onChange","placeholder","onCreate"])):e.type==="user"?(s(),v(D,{key:2,class:"form-control",value:d(y)(t.data[e.name]).full_name,doctype:e.doctype,onChange:o=>t.data[e.name]=o,placeholder:l.__(e.placeholder),hideMe:!0},{prefix:n(()=>[a(E,{class:"mr-2",user:t.data[e.name],size:"sm"},null,8,["user"])]),"item-prefix":n(({option:o})=>[a(E,{class:"mr-2",user:o.value,size:"sm"},null,8,["user"])]),"item-label":n(({option:o})=>[a(d(C),{text:o.value},{default:n(()=>[r("div",le,_(d(y)(o.value).full_name),1)]),_:2},1032,["text"])]),_:2},1032,["value","doctype","onChange","placeholder"])):e.type==="dropdown"?(s(),u("div",ce,[a(U,null,{target:n(({open:o})=>[a(h,{label:t.data[e.name],class:"dropdown-button flex w-full items-center justify-between rounded border border-gray-100 bg-gray-100 px-2 py-1.5 text-base text-gray-800 placeholder-gray-500 transition-colors hover:border-gray-200 hover:bg-gray-200 focus:border-gray-500 focus:bg-white focus:shadow-sm focus:outline-none focus:ring-0 focus-visible:ring-2 focus-visible:ring-gray-400"},{suffix:n(()=>[a(d(w),{name:o?"chevron-up":"chevron-down",class:"h-4 text-gray-600"},null,8,["name"])]),default:n(()=>[r("div",ie,_(t.data[e.name]),1)]),_:2},1032,["label"])]),body:n(()=>{var o;return[r("div",ue,[r("div",null,[(o=e.options)!=null&&o.length?(s(!0),u(F,{key:0},j(e.options,B=>(s(),v(ae,{key:B.name,option:B},null,8,["option"]))),128)):(s(),u("div",de,[r("div",me,_(l.__("No {0} Available",[e.label])),1)]))]),r("div",he,[a(h,{variant:"ghost",class:"w-full !justify-start",label:l.__("Create New"),onClick:B=>e.create()},{prefix:n(()=>[a(d(w),{name:"plus",class:"h-4"})]),_:2},1032,["label","onClick"])])])]}),_:2},1024)])):e.type==="dropdownNote"?(s(),u("div",pe,[a(U,{class:"relative w-[100px]"},{target:n(({open:o})=>[a(h,{label:l.__("Note"),class:"dropdown-button flex w-full items-center justify-between rounded border border-gray-100 bg-gray-100 px-2 py-1.5 text-base text-gray-800 placeholder-gray-500 transition-colors hover:border-gray-200 hover:bg-gray-200 focus:border-gray-500 focus:bg-white focus:shadow-sm focus:outline-none focus:ring-0 focus-visible:ring-2 focus-visible:ring-gray-400"},{suffix:n(()=>[a(d(w),{name:o?"chevron-up":"chevron-down",class:"h-4 text-gray-600"},null,8,["name"])]),_:2},1032,["label"])]),body:n(()=>[r("div",ve,[r("div",ye,[a(d(q),{variant:"outline",ref_for:!0,ref:"content","editor-class":"!prose-sm overflow-auto min-h-[180px]  max-h-80 py-1.5 px-2 rounded border border-gray-300 bg-white hover:border-gray-400 hover:shadow-sm focus:bg-white focus:border-gray-500 focus:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-gray-400 text-gray-800 transition-colors",bubbleMenu:!0,value:t.data[e.name],placeholder:l.__("Write Content..."),onChange:o=>t.data[e.name]=o},null,8,["value","placeholder","onChange"])])])]),_:2},1024)])):(s(),v(m,{key:5,type:"text",placeholder:l.__(e.placeholder),modelValue:t.data[e.name],"onUpdate:modelValue":o=>t.data[e.name]=o,onFocus:o=>b(t.data[e.name],e.name),onBlur:o=>f(t.data[e.name],e.name)},null,8,["placeholder","modelValue","onUpdate:modelValue","onFocus","onBlur"]))]))),128))],2)],2))),128))])}}},we=L(ge,[["__scopeId","data-v-e5e98447"]]);export{we as F,Y as S};
//# sourceMappingURL=Fields-05088d1a.js.map
