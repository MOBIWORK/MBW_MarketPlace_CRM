import{_ as A}from"./CustomActions-78928ae0.js";import{aX as I,G as r,c as m,s as U,o as d,b as F,f as s,w as p,a as w,d as x,t as L,k as z,F as P,X as E,W as N,u as T,ag as R,$ as W}from"./index-fd4111d0.js";import{_ as X,a as j}from"./LayoutHeader-4431816a.js";import{C as D}from"./ContactModal-891a8f63.js";import{_ as G}from"./ContactsListView-57f29a95.js";import{_ as O}from"./ViewControls-fd4f1e0f.js";import{o as q}from"./organizations-47b1381a.js";import"./Fields-0f4da799.js";import"./EditIcon-fc06c5a8.js";import"./IndicatorIcon-b09272ab.js";import"./EditValueModal-3deb1bd3.js";import"./DatePicker-808a1e66.js";import"./label-3c481436.js";import"./ListView-dc019d7b.js";import"./DatetimePicker-76bd67f8.js";const H={key:1,class:"flex h-full items-center justify-center"},J={class:"flex flex-col items-center gap-3 text-xl font-medium text-gray-500"},de={__name:"Contacts",setup(K){const{getOrganization:M}=q(),$=I(),i=r(!1),f=m(()=>{var a,e,u;return(u=(e=(a=o.value)==null?void 0:a.data)==null?void 0:e.data)==null?void 0:u.find(l=>l.name===$.params.contactId)}),S=m(()=>{let a=[{label:__("Contacts"),route:{name:"Contacts"}}];return f.value&&a.push({label:__(f.value.full_name),route:{name:"Contact",params:{contactId:f.value.name}}}),a}),v=r(null),o=r({}),c=r(1),_=r(1),C=r(20),y=r(null),V=r([]);m(()=>{var a;return(a=o.value)==null?void 0:a.data.columns.forEach(e=>{e.key==="full_name"&&(e.key="first_name")})});const b=m(()=>{var a,e,u;return(e=(a=o.value)==null?void 0:a.data)!=null&&e.data?(u=o.value)==null?void 0:u.data.data.map(l=>{var g;let t={};return(g=o.value)==null||g.data.rows.forEach(n=>{var k;t[n]=l[n],n=="first_name"?t[n]={label:l.first_name,image_label:l.first_name,image:l.image}:n=="company_name"?t[n]={label:l.company_name,logo:(k=M(l.company_name))==null?void 0:k.organization_logo}:["modified","creation"].includes(n)&&(t[n]={label:E(l[n],W),timeAgo:__(N(l[n]))})}),t}):[]});function B(a){V.value=a}return(a,e)=>{const u=U("FeatherIcon"),l=U("Button");return d(),F(P,null,[s(X,null,{"left-header":p(()=>[s(T(j),{items:S.value},null,8,["items"])]),"right-header":p(()=>{var t;return[(t=v.value)!=null&&t.customListActions?(d(),w(A,{key:0,actions:v.value.customListActions},null,8,["actions"])):z("",!0),s(l,{variant:"solid",label:a.__("Create"),onClick:e[0]||(e[0]=g=>i.value=!0)},{prefix:p(()=>[s(u,{name:"plus",class:"h-4"})]),_:1},8,["label"])]}),_:1}),s(O,{ref_key:"viewControls",ref:y,modelValue:o.value,"onUpdate:modelValue":e[1]||(e[1]=t=>o.value=t),loadMore:c.value,"onUpdate:loadMore":e[2]||(e[2]=t=>c.value=t),resizeColumn:_.value,"onUpdate:resizeColumn":e[3]||(e[3]=t=>_.value=t),updatedPageCount:C.value,"onUpdate:updatedPageCount":e[4]||(e[4]=t=>C.value=t),doctype:"FCRM Contact",showElement:!0,placeholderText:a.__("Search"),docSelect:V.value},null,8,["modelValue","loadMore","resizeColumn","updatedPageCount","placeholderText","docSelect"]),o.value.data&&b.value.length?(d(),w(G,{key:0,ref_key:"contactsListView",ref:v,modelValue:o.value.data.page_length_count,"onUpdate:modelValue":e[5]||(e[5]=t=>o.value.data.page_length_count=t),list:o.value,"onUpdate:list":e[6]||(e[6]=t=>o.value=t),rows:b.value,columns:o.value.data.columns,options:{showTooltip:!1,resizeColumn:!0,rowCount:o.value.data.row_count,totalCount:o.value.data.total_count},onLoadMore:e[7]||(e[7]=()=>c.value++),onColumnWidthUpdated:e[8]||(e[8]=()=>_.value++),onUpdatePageCount:e[9]||(e[9]=t=>C.value=t),onApplyFilter:e[10]||(e[10]=t=>y.value.applyFilter(t)),"onUpdate:selections":e[11]||(e[11]=t=>B(t))},null,8,["modelValue","list","rows","columns","options"])):o.value.data?(d(),F("div",H,[x("div",J,[s(R,{class:"h-10 w-10"}),x("span",null,L(a.__("No {0} Found",[a.__("contacts")])),1),s(l,{label:a.__("Create"),onClick:e[12]||(e[12]=t=>i.value=!0)},{prefix:p(()=>[s(u,{name:"plus",class:"h-4"})]),_:1},8,["label"])])])):z("",!0),s(D,{modelValue:i.value,"onUpdate:modelValue":e[13]||(e[13]=t=>i.value=t),contact:{}},null,8,["modelValue"])],64)}}};export{de as default};
//# sourceMappingURL=Contacts-9f6eb1cf.js.map
